{
  "title": "Why Is Kubernetes So Hard - 4 Reasons Why And What to do About it",
  "summary": "Kubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto",
  "publishDate": "Wed Mar 03 2021 03:03:48 GMT+0000 (Coordinated Universal Time)",
  "author": "regis-wilson",
  "readingTime": 9,
  "categories": [
    "kubernetes",
    "platform-engineering"
  ],
  "mainImage": "/blog-images/0de40b472cdcd421f32d1dd75c78815d.jpg",
  "imageAlt": "Two wrestling athletes fighting representing why Kubernetes infrastructure is hard",
  "showCTA": true,
  "ctaCopy": "Simplify Kubernetes infrastructure management with Release's ephemeral environments for seamless testing and deployment workflows.",
  "ctaLink": "https://release.com/signup?utm_source=blog&utm_medium=cta&utm_campaign=blog-cta&utm_content=why-kubernetes-is-so-hard",
  "relatedPosts": [
    ""
  ],
  "ogImage": "/blog-images/0de40b472cdcd421f32d1dd75c78815d.jpg",
  "excerpt": "Kubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto",
  "tags": [
    "kubernetes",
    "platform-engineering"
  ],
  "ctaButton": "Try Release for Free",
  "body": {
    "raw": "\n### Overview\n\n- [Introduction to Kubernetes](#intro)\n- [Kubernetes Infrastructure Is Hard](#k8sishard)\n- [YAML is not a Markup Language](#yaml)\n- [You Can't Just Copy-Paste Code in Kubernetes](#copypaste)\n- [Kubernetes Debugging](#debug)\n- [Release Hub Solution](#solution)\n\n[‍](#solution)\n\n### Introduction to Kubernetes\n\nKubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto table-stakes requirement for production workloads running containers. “Containerising” applications is _relatively_ straightforward, and most DevOps engineers worth their salt can create a few Dockerfiles and build images in a pipeline that are ready to run. But where do you “run” your Docker containers? And which versions do you deploy? And how do all the containers talk to each other? This is where orchestration comes into play and where a few options are proposed by large vendors. There are two main options available at the time of this writing: Elastic Container Service (ECS) from Amazon Web Services (AWS) and Kubernetes which is offered by all the Infrastructure As A Service (IaaS) providers, including even AWS.\n\nThe hope is that orchestration will allow companies to deliver their containerised applications to test and integration environments quickly and painlessly. The ideal scenario is that it “just works”, that is, you would snap your fingers and wait a few minutes before you see your application running in front of you. Ideally, you’d only need to specify the minimum information necessary to run your application: name, framework, dependencies, and so forth, preferably read out from existing configuration files you already have available. That’s the hope anyway.\n\nObviously, from the title, we are focusing on Kubernetes, mainly because it is available everywhere and mainly because the only _other_ option is ECS which only proves the point of our thesis that Kubernetes is hard to use because AWS came up with their own solution that is _supposed to be_ easier. But why is it so hard to use? How long would it reasonably take to get your application(s) running in K8s?? And why isn’t it easier?\n\n### Kubernetes Infrastructure Is Hard\n\nWe always start with the infrastructure even though most companies wouldn’t build their own Kubernetes clusters themselves. If you were ever going to use a managed infrastructure service, K8s would be at the top of the list. I’m sure there are a few people who start up [minikube](https://minikube.sigs.k8s.io/docs/start/) on their laptops and say to themselves, “Wow, this is easy! I can do this myself!!” This reminds me of people who start up an [Elasticsearch](https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-elastic-stack.html) container on their laptop and say, “Wow, we should implement this for our website!!” Fast forward to a production launch six months or a year later and the simple “We can do this ourselves” mantra turns into “I wish we didn’t have to do this anymore.”\n\nIf you were truly going to build your own Kubernetes cluster, you’d need to build all the control plane servers and services on your bare-metal or Virtual Machines (VMs) from an IaaS of choice, and then tie them all together with some fancy networking configuration to separate control-plane traffic from container traffic. You’d need to configure and run all of the control plane software and get them all talking to each other, running stably and monitored properly. Perversely, you’d be orchestrating the containers that orchestrate the application, but without a lot of orchestration! The fancy mirage that’s presented when you run minikube or Docker Desktop on Windows hides all the inception of running a container orchestration system using containers.\n\nWe haven’t even gotten to the complications of setting up ingresses (which are just nginx instances, usually) and load balancers that sit on top of or next to the control plane stack. A lot of the time, you’ll feel like you are creating a whole infrastructure just for your infrastructure to run (which isn’t unusual, but definitely doesn’t feel better than trying to orchestrate things yourself). We also haven’t gotten into the Role Based Authentication Controls and network policies that need to be set to support more than a single application or stack running in one cluster. The number of configuration points and server-side setups start to mount quickly and we haven’t even started orchestrating applications yet, which is the whole point of the orchestration system we’re supposed to be setting up.\n\nAnd let’s suppose that you really do wade out into this deep North Atlantic Ocean of huge waves and death-inducing freezing waters, and build yourself a production-worthy ship that can orchestrate your containers into an actual application. You look back up at your calendar and it’s been six months or a year since you started, and you’re just now deploying a control plane that says, “Hello World!” You think you’re successful and you’re about to celebrate when you check the releases section on the website and now you have a new version of k8s to deploy!!!\n\nI hear what you’re saying, “We’re large company and we have lots of DevOps engineers who are top decile of engineering talent in the whole world. We can handle all the heavy lifting. You’re just a whining, jealous baby.” I see you, [Datadog](https://www.youtube.com/watch?v=HDm9iNkLyPI) and [Ticketmaster](https://www.youtube.com/watch?v=wqXVKneP0Hg). (By the way, your accusations of jealousy might be correct. At the end of my good friend Justin Dean’s keynote speech where he shows the slides with all the team members, my picture should have been up there — but I had left the team two years earlier.) For everyone else, we all just decide to not spend six months or a year trying to build our control plane and start up our IaaS provider’s managed service and cross our fingers and pray.\n\n### K8s YAML Ain’t Markup Language\n\nIf you’ve skipped ahead and just started up a managed k8s cluster, you’re still in for a long and tedious journey wading into a deep sea of confusing YAML. YAML is to text what James Joyce’s [_Finnegan’s Wake_](https://www.finwake.com/1024chapter1/fw01.htm) is to English. If you close one eye, use only your left pinky and right thumb to follow some brail, put your feet into ballet’s fifth position, and then recite World War II codes under your breath, then you will easily see that YAML is quite a breeze to comprehend. Once you get the hang of it, it’s like riding a bicycle over a frozen lake on centimeter-thin ice with rabid wolves chasing you. It’s as easy as trying to crash the Ancient Aliens cocktail party held in Fort Knox on gold smuggling days.\n\nLook, it’s not actually that hard, right? Let’s say a guy walks up to you on the street. He’s a k8s expert and he’s going to show you how easy the “hello world” web service deployment is. The conversation goes like this:\n\n```line-numbers\n\nHim: “kind: Deployment”\n\nYou: “Oh, I see. Yes, I like it.”\n\nHim: “apiVersion: apps/v1beta1.”\n\nYou: “Uh, okay. Isn’t v1beta1 out of date? You can use v1 as of k8s 1.9.\nIt’s actually removed in 1.16, but I wonder how many people have never\nupdated.”\n\nHim: “Start over.”\n\nYou: “Wat.”\n\nHim: “kind: Deployment”\n\nYou: “Stop with the Kinds everywhere!”\n\nHim: “apiVersion: apps/v1”\n\nYou: “This again.”\n\nHim: “spec:”\n\nYou: “Huh??”\n\nHim: “selector:”\n\nYou: “No.”\n\nHim: “matchLabels:”\n\nYou: “Wat.”\n\nHim: “app: nginx”\n\nYou: “That’s nearly the first thing I’ve understood about this so far.”\n\nHim: “spec:”\n\nYou: “Again?”\n\nHim: “containers:”\n\nYou: “Okay, now we’re getting somewhere.”\n\nHim: “image: nginx:1.14.2”\n\nYou: “Hmm.”\n\nHim: “ports:”\n\nYou: “Aiiiiieeee.”\n\nHim: “containerPort: 80”\n\nYou: “I’m going home. I quit. There must be a devops job I can get where\nI work on [Gatsby blogs](https://www.gatsbyjs.com/ \"Gatsby nodejs frontend\")\nall day.”\n\n```\n\nAnd that’s just trying to read and understand the file. Try reading two k8s yaml examples and then generate one yourself from scratch. Even better, every day try a [code kata](http://codekata.com/) practice of writing working and deployable configurations to Kubernetes.\n\nI DARE YOU.\n\n### Copy Paste Ain’t Code\n\nI’m still chuckling over the previous section. I have to chuckle because this is the daily pain of my day-to-day existence and facing that pain directly is like standing in front of a bus being driven by Keanu Reeves on the freeway. The only thing that keeps my nose going back to the grindstone is the realization that working with NodeJs would be worse. The problem is that the Kubernetes docs are pretty good. You copy-paste some hello world examples and the outputs look like they work. You start to get pretty good at using kubectl. You can see vague shapes and outlines in YAML. You’re starting to gain confidence that you might be able to do something useful.\n\n“Let’s try to move our application into Kubernetes!” you yell into the air as you emerge dripping wet from your bathtub wrapped only in a towel, like [Archimedes](https://www.scientificamerican.com/article/fact-or-fiction-archimede/) sprinting through the streets of Syracuse. “We’ll just copy-paste some sections from here and here and put them there and there, and we’ll have our app running in no time,” you breathlessly explain to your coworkers. “Does it work?!” they excitedly ask. “Not yet. I mean, no. I need to indent the section and remove one piece that is not used in this spec. Then I need to decide if we use a deployment or a daemonset, but it’s almost there. I swear!”\n\nFirst of all, put on some clothes. I’m all for taking a bath while thinking about kubernetes YAML files, but you need to get dressed afterward. Also, if you drop your Macbook Air into the bath with you, the results can be electrifying. I know. Second, here’s a riddle for you: how many YAML files do you think you need to run and deploy your application? Good thing that some people have ten fingers and ten toes because that’s probably how many you’ll need. And they’re all related but not really. You can copy-paste sections around if you’re adventurous and gullible, but you have no idea if the sections are compatible. There are only four required fields, all of which are gibberish, and everything goes under spec: (including spec:). Most of the sections are duplicated but only slightly. They vary microscopically in ways that matter macroscopically.\n\nCopying and pasting is a wonderful art, and I’ve personally worked my entire adult career that way. I gleefully admit my whole output in life is like a [ransom note](https://tvtropes.org/pmwiki/pmwiki.php/Main/CutAndPasteNote) cut from stack overflow and documentation examples. But piecing together this fragile web of text to do what really should be quite simple and obvious is tedious, error-prone, and too trial-and-error-y. It would be much better to express what you want and be able to actually emit workable, executable code that produces a result you want: namely your application running.\n\nAll this complaining about YAML is quite amusing, but really it’s the symptom of the cause: Kubernetes is so difficult to use because the interface has to be completely rigid. K8s configurations are not living, majestic trees, they are a bunch of dead chopped wood. They are worse than chopped wood, they are whole petrified forests, vast piles of rocks with the imprint of thousands of years of growth rings imprinted on them and preserved for millions of years.\n\nNo, they are worse than petrified wood forests! Kubernetes manifests are the punch cards of the twenty-first century. Each YAML is a collection of holes poked into chopped up wooden cards that we can’t read and understand, that we shove blindly into the kubectl apply -f command and hope that we put them in the correct order and didn’t make a single-hole mistake anywhere in the stack. Then, just like the machines of yesteryear, we try to gain insight into what’s happening by looking at the blinking lights and obscure output of ticker tape, hoping to glean insight.\n\nJust like trying to reproduce Mozart or Beethoven on a [pianola](https://en.wikipedia.org/wiki/Player_piano#Music_rolls) is tedious, laborious, error prone, and ultimately unfulfilling, similarly k8s manifests are frozen forever in time, impossible to write expressively, and playing the same tune _ad infinitum_. The reason people still use v1beta1 even though v1 has been available for _two years_ is because nobody has generated new k8s configurations since then.\n\n### Doctor, Heal Thyself; or Debugging Yourself Is Hard\n\nThe great thing about k8s is that when something goes wrong, nobody knows. I can’t count the number of times I’ve deployed something, worked on something else for a few hours, came back and realised that the deployment had just silently failed and nothing ever notified me. The error message was available somewhere: was it in the deployment logs or the pod logs? Is the ingress or ingress deployment running? Where in the ten or dozens of Kinds files did the log entry appear? And the root cause was often some unrelated issue: an errant and invisible whitespace, not using double quotation marks when I should have, not using single quotation marks when I should have, or getting the brunt end of the indent from a copy-paste issue from three weeks ago.\n\nThere are, of course, tools and techniques and monitoring tools that help out; it’s like Elon Musk’s [Mars orbiter](https://youtu.be/aBr2kKAHN6M?t=837) MVP: “Does it work?” “Absolutely!! A thousand times, yes!” “What does it do?” “Almost anything you want!” You have to know what to look for and where to look for it, then you have to know how to figure out what to do about it, then you have to figure out where in the ten or dozens of files which line or lines to fix, and then you have to know how to fix it.\n\nThe other great thing about k8s is that you own the whole thing. Listen: friendo, pal, buddy, you chose this existence. You copy pasted the “code”. The documentation examples work. I can run “Hello World!” on my laptop so it’s clearly all on you. You’re the one who ran through the office dripping wet in a towel shouting “Kubernetes!” If the Hippocratic oath is “Do no harm” then maybe the Devops oath is “Do no more harm than that which will get you fired.”\n\nAnd the last great thing about k8s is there are tons of people and companies who claim to know what is going on and what to do, and they’ll gladly take your money to show you whether that’s true or not. Type Kubernetes into the search engines and see all the ads that pop up. This article is part of the problem, and also the solution, so stay with me.\n\n### The Solution, Finally\n\nThere are several ways to make Kubernetes easier to use:\n\n1.  Don’t use k8s: run, screaming for your lives\n2.  Train all your people to figure it out (come back to me when you’re done; I still might be alive. Probably not.)\n3.  Hire more people for your team to figure it out (I’m available, hit me up. Ha ha, just kidding.)\n4.  Hire someone else to do it for you\n5.  Wait longer for results, do more with less, eventually settle on something that isn’t horrible\n6.  Find a solution that deploys your applications to environments for you and get on with your actual business of, well, whatever business it is you actually do. Automation tools and services can help you get your application running without investing in the activities described above. Someone has to do it, but it better not be you.\n\nAt [Release](https://releasehub.com/) we work tirelessly to bring your application to life in an orchestrated, human interface. We write software to deal with all the complexity, difficulty, and strain so that no one else has to (unless they want to!) We create the engine that drives the Kubernetes vehicle, and we deliver solutions that our customers can use to get on with their business of doing business.\n\n### Additional Resources\n\n- [Kubernetes Pods Advanced Concepts Explained](https://releasehub.com/blog/kubernetes-pods-advanced-concepts-explained)\n- [How Do You Make Kubernetes Config Files Not Suck?](https://releasehub.com/blog/how-to-make-kubernetes-config-files-not-suck)\n- [Kubernetes - How to Debug CrashLoopBackOff in a Container](https://releasehub.com/blog/kubernetes-how-to-debug-crashloopbackoff-in-a-container)\n- [Cutting Build Time In Half with Docker’s Buildx Kubernetes Driver](https://releasehub.com/blog/cutting-build-time-in-half-docker-buildx-kubernetes)\n- [Kubernetes Health Checks - 2 Ways to Improve Stability in Your Production Applications](https://releasehub.com/blog/kubernetes-health-checks-2-ways-to-improve-stability)\n",
    "code": "var Component=(()=>{var c=Object.create;var i=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},s=(n,e,o,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of p(e))!m.call(n,a)&&a!==o&&i(n,a,{get:()=>e[a],enumerable:!(r=d(e,a))||r.enumerable});return n};var w=(n,e,o)=>(o=n!=null?c(y(n)):{},s(e||!n||!n.__esModule?i(o,\"default\",{value:n,enumerable:!0}):o,n)),b=n=>s(i({},\"__esModule\",{value:!0}),n);var h=g((K,l)=>{l.exports=_jsx_runtime});var A={};f(A,{default:()=>I,frontmatter:()=>k});var t=w(h()),k={title:\"Why Is Kubernetes So Hard - 4 Reasons Why And What to do About it\",summary:\"Kubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto\",publishDate:\"Wed Mar 03 2021 03:03:48 GMT+0000 (Coordinated Universal Time)\",author:\"regis-wilson\",readingTime:9,categories:[\"kubernetes\",\"platform-engineering\"],mainImage:\"/blog-images/0de40b472cdcd421f32d1dd75c78815d.jpg\",imageAlt:\"Two wrestling athletes fighting representing why Kubernetes infrastructure is hard\",showCTA:!0,ctaCopy:\"Simplify Kubernetes infrastructure management with Release's ephemeral environments for seamless testing and deployment workflows.\",ctaLink:\"https://release.com/signup?utm_source=blog&utm_medium=cta&utm_campaign=blog-cta&utm_content=why-kubernetes-is-so-hard\",relatedPosts:[\"\"],ogImage:\"/blog-images/0de40b472cdcd421f32d1dd75c78815d.jpg\",excerpt:\"Kubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto\",tags:[\"kubernetes\",\"platform-engineering\"],ctaButton:\"Try Release for Free\"};function u(n){let e=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",p:\"p\",em:\"em\",pre:\"pre\",code:\"code\",ol:\"ol\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h3,{id:\"overview\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#overview\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Overview\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#intro\",children:\"Introduction to Kubernetes\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#k8sishard\",children:\"Kubernetes Infrastructure Is Hard\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#yaml\",children:\"YAML is not a Markup Language\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#copypaste\",children:\"You Can't Just Copy-Paste Code in Kubernetes\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#debug\",children:\"Kubernetes Debugging\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"#solution\",children:\"Release Hub Solution\"})}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"#solution\",children:\"\\u200D\"})}),`\n`,(0,t.jsxs)(e.h3,{id:\"introduction-to-kubernetes\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#introduction-to-kubernetes\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Introduction to Kubernetes\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Kubernetes (k8s) has been all the rage for the last few years because application orchestration has become a de facto table-stakes requirement for production workloads running containers. \\u201CContainerising\\u201D applications is \",(0,t.jsx)(e.em,{children:\"relatively\"}),\" straightforward, and most DevOps engineers worth their salt can create a few Dockerfiles and build images in a pipeline that are ready to run. But where do you \\u201Crun\\u201D your Docker containers? And which versions do you deploy? And how do all the containers talk to each other? This is where orchestration comes into play and where a few options are proposed by large vendors. There are two main options available at the time of this writing: Elastic Container Service (ECS) from Amazon Web Services (AWS) and Kubernetes which is offered by all the Infrastructure As A Service (IaaS) providers, including even AWS.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"The hope is that orchestration will allow companies to deliver their containerised applications to test and integration environments quickly and painlessly. The ideal scenario is that it \\u201Cjust works\\u201D, that is, you would snap your fingers and wait a few minutes before you see your application running in front of you. Ideally, you\\u2019d only need to specify the minimum information necessary to run your application: name, framework, dependencies, and so forth, preferably read out from existing configuration files you already have available. That\\u2019s the hope anyway.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Obviously, from the title, we are focusing on Kubernetes, mainly because it is available everywhere and mainly because the only \",(0,t.jsx)(e.em,{children:\"other\"}),\" option is ECS which only proves the point of our thesis that Kubernetes is hard to use because AWS came up with their own solution that is \",(0,t.jsx)(e.em,{children:\"supposed to be\"}),\" easier. But why is it so hard to use? How long would it reasonably take to get your application(s) running in K8s?? And why isn\\u2019t it easier?\"]}),`\n`,(0,t.jsxs)(e.h3,{id:\"kubernetes-infrastructure-is-hard\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#kubernetes-infrastructure-is-hard\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kubernetes Infrastructure Is Hard\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"We always start with the infrastructure even though most companies wouldn\\u2019t build their own Kubernetes clusters themselves. If you were ever going to use a managed infrastructure service, K8s would be at the top of the list. I\\u2019m sure there are a few people who start up \",(0,t.jsx)(e.a,{href:\"https://minikube.sigs.k8s.io/docs/start/\",children:\"minikube\"}),\" on their laptops and say to themselves, \\u201CWow, this is easy! I can do this myself!!\\u201D This reminds me of people who start up an \",(0,t.jsx)(e.a,{href:\"https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-elastic-stack.html\",children:\"Elasticsearch\"}),\" container on their laptop and say, \\u201CWow, we should implement this for our website!!\\u201D Fast forward to a production launch six months or a year later and the simple \\u201CWe can do this ourselves\\u201D mantra turns into \\u201CI wish we didn\\u2019t have to do this anymore.\\u201D\"]}),`\n`,(0,t.jsx)(e.p,{children:\"If you were truly going to build your own Kubernetes cluster, you\\u2019d need to build all the control plane servers and services on your bare-metal or Virtual Machines (VMs) from an IaaS of choice, and then tie them all together with some fancy networking configuration to separate control-plane traffic from container traffic. You\\u2019d need to configure and run all of the control plane software and get them all talking to each other, running stably and monitored properly. Perversely, you\\u2019d be orchestrating the containers that orchestrate the application, but without a lot of orchestration! The fancy mirage that\\u2019s presented when you run minikube or Docker Desktop on Windows hides all the inception of running a container orchestration system using containers.\"}),`\n`,(0,t.jsx)(e.p,{children:\"We haven\\u2019t even gotten to the complications of setting up ingresses (which are just nginx instances, usually) and load balancers that sit on top of or next to the control plane stack. A lot of the time, you\\u2019ll feel like you are creating a whole infrastructure just for your infrastructure to run (which isn\\u2019t unusual, but definitely doesn\\u2019t feel better than trying to orchestrate things yourself). We also haven\\u2019t gotten into the Role Based Authentication Controls and network policies that need to be set to support more than a single application or stack running in one cluster. The number of configuration points and server-side setups start to mount quickly and we haven\\u2019t even started orchestrating applications yet, which is the whole point of the orchestration system we\\u2019re supposed to be setting up.\"}),`\n`,(0,t.jsx)(e.p,{children:\"And let\\u2019s suppose that you really do wade out into this deep North Atlantic Ocean of huge waves and death-inducing freezing waters, and build yourself a production-worthy ship that can orchestrate your containers into an actual application. You look back up at your calendar and it\\u2019s been six months or a year since you started, and you\\u2019re just now deploying a control plane that says, \\u201CHello World!\\u201D You think you\\u2019re successful and you\\u2019re about to celebrate when you check the releases section on the website and now you have a new version of k8s to deploy!!!\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I hear what you\\u2019re saying, \\u201CWe\\u2019re large company and we have lots of DevOps engineers who are top decile of engineering talent in the whole world. We can handle all the heavy lifting. You\\u2019re just a whining, jealous baby.\\u201D I see you, \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/watch?v=HDm9iNkLyPI\",children:\"Datadog\"}),\" and \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/watch?v=wqXVKneP0Hg\",children:\"Ticketmaster\"}),\". (By the way, your accusations of jealousy might be correct. At the end of my good friend Justin Dean\\u2019s keynote speech where he shows the slides with all the team members, my picture should have been up there \\u2014 but I had left the team two years earlier.) For everyone else, we all just decide to not spend six months or a year trying to build our control plane and start up our IaaS provider\\u2019s managed service and cross our fingers and pray.\"]}),`\n`,(0,t.jsxs)(e.h3,{id:\"k8s-yaml-aint-markup-language\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#k8s-yaml-aint-markup-language\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"K8s YAML Ain\\u2019t Markup Language\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"If you\\u2019ve skipped ahead and just started up a managed k8s cluster, you\\u2019re still in for a long and tedious journey wading into a deep sea of confusing YAML. YAML is to text what James Joyce\\u2019s \",(0,t.jsx)(e.a,{href:\"https://www.finwake.com/1024chapter1/fw01.htm\",children:(0,t.jsx)(e.em,{children:\"Finnegan\\u2019s Wake\"})}),\" is to English. If you close one eye, use only your left pinky and right thumb to follow some brail, put your feet into ballet\\u2019s fifth position, and then recite World War II codes under your breath, then you will easily see that YAML is quite a breeze to comprehend. Once you get the hang of it, it\\u2019s like riding a bicycle over a frozen lake on centimeter-thin ice with rabid wolves chasing you. It\\u2019s as easy as trying to crash the Ancient Aliens cocktail party held in Fort Knox on gold smuggling days.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"Look, it\\u2019s not actually that hard, right? Let\\u2019s say a guy walks up to you on the street. He\\u2019s a k8s expert and he\\u2019s going to show you how easy the \\u201Chello world\\u201D web service deployment is. The conversation goes like this:\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-line-numbers\",children:`\nHim: \\u201Ckind: Deployment\\u201D\n\nYou: \\u201COh, I see. Yes, I like it.\\u201D\n\nHim: \\u201CapiVersion: apps/v1beta1.\\u201D\n\nYou: \\u201CUh, okay. Isn\\u2019t v1beta1 out of date? You can use v1 as of k8s 1.9.\nIt\\u2019s actually removed in 1.16, but I wonder how many people have never\nupdated.\\u201D\n\nHim: \\u201CStart over.\\u201D\n\nYou: \\u201CWat.\\u201D\n\nHim: \\u201Ckind: Deployment\\u201D\n\nYou: \\u201CStop with the Kinds everywhere!\\u201D\n\nHim: \\u201CapiVersion: apps/v1\\u201D\n\nYou: \\u201CThis again.\\u201D\n\nHim: \\u201Cspec:\\u201D\n\nYou: \\u201CHuh??\\u201D\n\nHim: \\u201Cselector:\\u201D\n\nYou: \\u201CNo.\\u201D\n\nHim: \\u201CmatchLabels:\\u201D\n\nYou: \\u201CWat.\\u201D\n\nHim: \\u201Capp: nginx\\u201D\n\nYou: \\u201CThat\\u2019s nearly the first thing I\\u2019ve understood about this so far.\\u201D\n\nHim: \\u201Cspec:\\u201D\n\nYou: \\u201CAgain?\\u201D\n\nHim: \\u201Ccontainers:\\u201D\n\nYou: \\u201COkay, now we\\u2019re getting somewhere.\\u201D\n\nHim: \\u201Cimage: nginx:1.14.2\\u201D\n\nYou: \\u201CHmm.\\u201D\n\nHim: \\u201Cports:\\u201D\n\nYou: \\u201CAiiiiieeee.\\u201D\n\nHim: \\u201CcontainerPort: 80\\u201D\n\nYou: \\u201CI\\u2019m going home. I quit. There must be a devops job I can get where\nI work on [Gatsby blogs](https://www.gatsbyjs.com/ \"Gatsby nodejs frontend\")\nall day.\\u201D\n\n`})}),`\n`,(0,t.jsxs)(e.p,{children:[\"And that\\u2019s just trying to read and understand the file. Try reading two k8s yaml examples and then generate one yourself from scratch. Even better, every day try a \",(0,t.jsx)(e.a,{href:\"http://codekata.com/\",children:\"code kata\"}),\" practice of writing working and deployable configurations to Kubernetes.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"I DARE YOU.\"}),`\n`,(0,t.jsxs)(e.h3,{id:\"copy-paste-aint-code\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#copy-paste-aint-code\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Copy Paste Ain\\u2019t Code\"]}),`\n`,(0,t.jsx)(e.p,{children:\"I\\u2019m still chuckling over the previous section. I have to chuckle because this is the daily pain of my day-to-day existence and facing that pain directly is like standing in front of a bus being driven by Keanu Reeves on the freeway. The only thing that keeps my nose going back to the grindstone is the realization that working with NodeJs would be worse. The problem is that the Kubernetes docs are pretty good. You copy-paste some hello world examples and the outputs look like they work. You start to get pretty good at using kubectl. You can see vague shapes and outlines in YAML. You\\u2019re starting to gain confidence that you might be able to do something useful.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"\\u201CLet\\u2019s try to move our application into Kubernetes!\\u201D you yell into the air as you emerge dripping wet from your bathtub wrapped only in a towel, like \",(0,t.jsx)(e.a,{href:\"https://www.scientificamerican.com/article/fact-or-fiction-archimede/\",children:\"Archimedes\"}),\" sprinting through the streets of Syracuse. \\u201CWe\\u2019ll just copy-paste some sections from here and here and put them there and there, and we\\u2019ll have our app running in no time,\\u201D you breathlessly explain to your coworkers. \\u201CDoes it work?!\\u201D they excitedly ask. \\u201CNot yet. I mean, no. I need to indent the section and remove one piece that is not used in this spec. Then I need to decide if we use a deployment or a daemonset, but it\\u2019s almost there. I swear!\\u201D\"]}),`\n`,(0,t.jsx)(e.p,{children:\"First of all, put on some clothes. I\\u2019m all for taking a bath while thinking about kubernetes YAML files, but you need to get dressed afterward. Also, if you drop your Macbook Air into the bath with you, the results can be electrifying. I know. Second, here\\u2019s a riddle for you: how many YAML files do you think you need to run and deploy your application? Good thing that some people have ten fingers and ten toes because that\\u2019s probably how many you\\u2019ll need. And they\\u2019re all related but not really. You can copy-paste sections around if you\\u2019re adventurous and gullible, but you have no idea if the sections are compatible. There are only four required fields, all of which are gibberish, and everything goes under spec: (including spec:). Most of the sections are duplicated but only slightly. They vary microscopically in ways that matter macroscopically.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Copying and pasting is a wonderful art, and I\\u2019ve personally worked my entire adult career that way. I gleefully admit my whole output in life is like a \",(0,t.jsx)(e.a,{href:\"https://tvtropes.org/pmwiki/pmwiki.php/Main/CutAndPasteNote\",children:\"ransom note\"}),\" cut from stack overflow and documentation examples. But piecing together this fragile web of text to do what really should be quite simple and obvious is tedious, error-prone, and too trial-and-error-y. It would be much better to express what you want and be able to actually emit workable, executable code that produces a result you want: namely your application running.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"All this complaining about YAML is quite amusing, but really it\\u2019s the symptom of the cause: Kubernetes is so difficult to use because the interface has to be completely rigid. K8s configurations are not living, majestic trees, they are a bunch of dead chopped wood. They are worse than chopped wood, they are whole petrified forests, vast piles of rocks with the imprint of thousands of years of growth rings imprinted on them and preserved for millions of years.\"}),`\n`,(0,t.jsx)(e.p,{children:\"No, they are worse than petrified wood forests! Kubernetes manifests are the punch cards of the twenty-first century. Each YAML is a collection of holes poked into chopped up wooden cards that we can\\u2019t read and understand, that we shove blindly into the kubectl apply -f command and hope that we put them in the correct order and didn\\u2019t make a single-hole mistake anywhere in the stack. Then, just like the machines of yesteryear, we try to gain insight into what\\u2019s happening by looking at the blinking lights and obscure output of ticker tape, hoping to glean insight.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Just like trying to reproduce Mozart or Beethoven on a \",(0,t.jsx)(e.a,{href:\"https://en.wikipedia.org/wiki/Player_piano#Music_rolls\",children:\"pianola\"}),\" is tedious, laborious, error prone, and ultimately unfulfilling, similarly k8s manifests are frozen forever in time, impossible to write expressively, and playing the same tune \",(0,t.jsx)(e.em,{children:\"ad infinitum\"}),\". The reason people still use v1beta1 even though v1 has been available for \",(0,t.jsx)(e.em,{children:\"two years\"}),\" is because nobody has generated new k8s configurations since then.\"]}),`\n`,(0,t.jsxs)(e.h3,{id:\"doctor-heal-thyself-or-debugging-yourself-is-hard\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#doctor-heal-thyself-or-debugging-yourself-is-hard\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Doctor, Heal Thyself; or Debugging Yourself Is Hard\"]}),`\n`,(0,t.jsx)(e.p,{children:\"The great thing about k8s is that when something goes wrong, nobody knows. I can\\u2019t count the number of times I\\u2019ve deployed something, worked on something else for a few hours, came back and realised that the deployment had just silently failed and nothing ever notified me. The error message was available somewhere: was it in the deployment logs or the pod logs? Is the ingress or ingress deployment running? Where in the ten or dozens of Kinds files did the log entry appear? And the root cause was often some unrelated issue: an errant and invisible whitespace, not using double quotation marks when I should have, not using single quotation marks when I should have, or getting the brunt end of the indent from a copy-paste issue from three weeks ago.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"There are, of course, tools and techniques and monitoring tools that help out; it\\u2019s like Elon Musk\\u2019s \",(0,t.jsx)(e.a,{href:\"https://youtu.be/aBr2kKAHN6M?t=837\",children:\"Mars orbiter\"}),\" MVP: \\u201CDoes it work?\\u201D \\u201CAbsolutely!! A thousand times, yes!\\u201D \\u201CWhat does it do?\\u201D \\u201CAlmost anything you want!\\u201D You have to know what to look for and where to look for it, then you have to know how to figure out what to do about it, then you have to figure out where in the ten or dozens of files which line or lines to fix, and then you have to know how to fix it.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"The other great thing about k8s is that you own the whole thing. Listen: friendo, pal, buddy, you chose this existence. You copy pasted the \\u201Ccode\\u201D. The documentation examples work. I can run \\u201CHello World!\\u201D on my laptop so it\\u2019s clearly all on you. You\\u2019re the one who ran through the office dripping wet in a towel shouting \\u201CKubernetes!\\u201D If the Hippocratic oath is \\u201CDo no harm\\u201D then maybe the Devops oath is \\u201CDo no more harm than that which will get you fired.\\u201D\"}),`\n`,(0,t.jsx)(e.p,{children:\"And the last great thing about k8s is there are tons of people and companies who claim to know what is going on and what to do, and they\\u2019ll gladly take your money to show you whether that\\u2019s true or not. Type Kubernetes into the search engines and see all the ads that pop up. This article is part of the problem, and also the solution, so stay with me.\"}),`\n`,(0,t.jsxs)(e.h3,{id:\"the-solution-finally\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#the-solution-finally\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"The Solution, Finally\"]}),`\n`,(0,t.jsx)(e.p,{children:\"There are several ways to make Kubernetes easier to use:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsx)(e.li,{children:\"Don\\u2019t use k8s: run, screaming for your lives\"}),`\n`,(0,t.jsx)(e.li,{children:\"Train all your people to figure it out (come back to me when you\\u2019re done; I still might be alive. Probably not.)\"}),`\n`,(0,t.jsx)(e.li,{children:\"Hire more people for your team to figure it out (I\\u2019m available, hit me up. Ha ha, just kidding.)\"}),`\n`,(0,t.jsx)(e.li,{children:\"Hire someone else to do it for you\"}),`\n`,(0,t.jsx)(e.li,{children:\"Wait longer for results, do more with less, eventually settle on something that isn\\u2019t horrible\"}),`\n`,(0,t.jsx)(e.li,{children:\"Find a solution that deploys your applications to environments for you and get on with your actual business of, well, whatever business it is you actually do. Automation tools and services can help you get your application running without investing in the activities described above. Someone has to do it, but it better not be you.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[\"At \",(0,t.jsx)(e.a,{href:\"https://releasehub.com/\",children:\"Release\"}),\" we work tirelessly to bring your application to life in an orchestrated, human interface. We write software to deal with all the complexity, difficulty, and strain so that no one else has to (unless they want to!) We create the engine that drives the Kubernetes vehicle, and we deliver solutions that our customers can use to get on with their business of doing business.\"]}),`\n`,(0,t.jsxs)(e.h3,{id:\"additional-resources\",children:[(0,t.jsx)(e.a,{className:\"anchor\",href:\"#additional-resources\",children:(0,t.jsx)(e.span,{className:\"icon icon-link\"})}),\"Additional Resources\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://releasehub.com/blog/kubernetes-pods-advanced-concepts-explained\",children:\"Kubernetes Pods Advanced Concepts Explained\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://releasehub.com/blog/how-to-make-kubernetes-config-files-not-suck\",children:\"How Do You Make Kubernetes Config Files Not Suck?\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://releasehub.com/blog/kubernetes-how-to-debug-crashloopbackoff-in-a-container\",children:\"Kubernetes - How to Debug CrashLoopBackOff in a Container\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://releasehub.com/blog/cutting-build-time-in-half-docker-buildx-kubernetes\",children:\"Cutting Build Time In Half with Docker\\u2019s Buildx Kubernetes Driver\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://releasehub.com/blog/kubernetes-health-checks-2-ways-to-improve-stability\",children:\"Kubernetes Health Checks - 2 Ways to Improve Stability in Your Production Applications\"})}),`\n`]})]})}function v(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(u,n)})):u(n)}var I=v;return b(A);})();\n;return Component;"
  },
  "_id": "blog/posts/why-kubernetes-is-so-hard.mdx",
  "_raw": {
    "sourceFilePath": "blog/posts/why-kubernetes-is-so-hard.mdx",
    "sourceFileName": "why-kubernetes-is-so-hard.mdx",
    "sourceFileDir": "blog/posts",
    "contentType": "mdx",
    "flattenedPath": "blog/posts/why-kubernetes-is-so-hard"
  },
  "type": "BlogPost",
  "computedSlug": "why-kubernetes-is-so-hard"
}